import json
from database import get_db

LEGUMES = [{'nom': 'Tomate', 'categorie': 'Fruit', 'varietes': ['Cœur de bœuf', 'Roma', 'Marmande', 'Noire de Crimée', 'Ananas', 'Saint-Pierre'], 'temp_min': 10.0, 'temp_opt': 22.0, 'temp_max': 30.0, 'duree_germination': 8.0, 'duree_semis_repiquage': 35.0, 'duree_semis_recolte': 90.0, 'duree_repiquage_recolte': 70.0, 'espacement': 60.0, 'profondeur': 0.5, 'unite': 'kg', 'notes': 'Tuteurer à 30cm'}, {'nom': 'Tomate cerise', 'categorie': 'Fruit', 'varietes': ['Sweet 100', 'Black Cherry', 'Yellow Pear', 'Gardener\\'], 'temp_min': 10.0, 'temp_opt': 22.0, 'temp_max': 30.0, 'duree_germination': 7.0, 'duree_semis_repiquage': 30.0, 'duree_semis_recolte': 80.0, 'duree_repiquage_recolte': 60.0, 'espacement': 50.0, 'profondeur': 0.5, 'unite': 'barquette', 'notes': ''}, {'nom': 'Mini tomate', 'categorie': 'Mini', 'varietes': ['Tiny Tim', 'Micro Tom', 'Red Robin'], 'temp_min': 12.0, 'temp_opt': 22.0, 'temp_max': 28.0, 'duree_germination': 7.0, 'duree_semis_repiquage': 28.0, 'duree_semis_recolte': 75.0, 'duree_repiquage_recolte': 55.0, 'espacement': 30.0, 'profondeur': 0.5, 'unite': 'barquette', 'notes': 'Idéal bacs et serres'}, {'nom': 'Courgette', 'categorie': 'Fruit', 'varietes': ['Black Beauty', 'Ronde de Nice', 'Cocozelle', 'Diamant'], 'temp_min': 15.0, 'temp_opt': 25.0, 'temp_max': 35.0, 'duree_germination': 5.0, 'duree_semis_repiquage': 15.0, 'duree_semis_recolte': 55.0, 'duree_repiquage_recolte': 45.0, 'espacement': 80.0, 'profondeur': 2.0, 'unite': 'pièce', 'notes': '1 plant = production abondante'}, {'nom': 'Mini courgette', 'categorie': 'Mini', 'varietes': ['Patio Star', 'Eight Ball'], 'temp_min': 15.0, 'temp_opt': 24.0, 'temp_max': 33.0, 'duree_germination': 5.0, 'duree_semis_repiquage': 14.0, 'duree_semis_recolte': 50.0, 'duree_repiquage_recolte': 40.0, 'espacement': 50.0, 'profondeur': 2.0, 'unite': 'pièce', 'notes': ''}, {'nom': 'Courge', 'categorie': 'Fruit', 'varietes': ['Butternut', 'Hokkaido', 'Spaghetti', 'Potimarron', 'Jack Be Little', 'Delicata'], 'temp_min': 15.0, 'temp_opt': 25.0, 'temp_max': 35.0, 'duree_germination': 7.0, 'duree_semis_repiquage': 21.0, 'duree_semis_recolte': 120.0, 'duree_repiquage_recolte': 100.0, 'espacement': 150.0, 'profondeur': 2.0, 'unite': 'pièce', 'notes': 'Grande surface nécessaire'}, {'nom': 'Concombre', 'categorie': 'Fruit', 'varietes': ['Marketmore', 'Vert long maraîcher', 'Straight Eight'], 'temp_min': 15.0, 'temp_opt': 24.0, 'temp_max': 32.0, 'duree_germination': 5.0, 'duree_semis_repiquage': 18.0, 'duree_semis_recolte': 60.0, 'duree_repiquage_recolte': 50.0, 'espacement': 60.0, 'profondeur': 1.0, 'unite': 'pièce', 'notes': 'Arrosage régulier'}, {'nom': 'Mini concombre', 'categorie': 'Mini', 'varietes': ['Miniature White', 'Picolino', 'Iznik'], 'temp_min': 15.0, 'temp_opt': 24.0, 'temp_max': 32.0, 'duree_germination': 5.0, 'duree_semis_repiquage': 16.0, 'duree_semis_recolte': 55.0, 'duree_repiquage_recolte': 45.0, 'espacement': 40.0, 'profondeur': 1.0, 'unite': 'pièce', 'notes': ''}, {'nom': 'Cornichon', 'categorie': 'Fruit', 'varietes': ['Vert Petit de Paris', 'National', 'Hokus'], 'temp_min': 15.0, 'temp_opt': 24.0, 'temp_max': 32.0, 'duree_germination': 6.0, 'duree_semis_repiquage': 14.0, 'duree_semis_recolte': 55.0, 'duree_repiquage_recolte': 45.0, 'espacement': 50.0, 'profondeur': 1.0, 'unite': 'kg', 'notes': 'Récolte fréquente requise'}, {'nom': 'Melon', 'categorie': 'Fruit', 'varietes': ['Charentais', 'Ananas', 'Petit Gris de Rennes', 'Alvaro'], 'temp_min': 18.0, 'temp_opt': 28.0, 'temp_max': 35.0, 'duree_germination': 6.0, 'duree_semis_repiquage': 25.0, 'duree_semis_recolte': 90.0, 'duree_repiquage_recolte': 75.0, 'espacement': 100.0, 'profondeur': 1.0, 'unite': 'pièce', 'notes': 'Paillis recommandé'}, {'nom': 'Pastèque', 'categorie': 'Fruit', 'varietes': ['Sugar Baby', 'Mini Motelle', 'Crimson Sweet'], 'temp_min': 18.0, 'temp_opt': 28.0, 'temp_max': 35.0, 'duree_germination': 7.0, 'duree_semis_repiquage': 28.0, 'duree_semis_recolte': 100.0, 'duree_repiquage_recolte': 80.0, 'espacement': 120.0, 'profondeur': 1.0, 'unite': 'pièce', 'notes': 'Besoin de chaleur'}, {'nom': 'Pâtisson', 'categorie': 'Fruit', 'varietes': ['Blanc', 'Jaune', 'Scallop'], 'temp_min': 15.0, 'temp_opt': 24.0, 'temp_max': 32.0, 'duree_germination': 6.0, 'duree_semis_repiquage': 14.0, 'duree_semis_recolte': 60.0, 'duree_repiquage_recolte': 50.0, 'espacement': 100.0, 'profondeur': 2.0, 'unite': 'pièce', 'notes': ''}, {'nom': 'Aubergine', 'categorie': 'Fruit', 'varietes': ['Violette de Barbentane', 'Black Beauty', 'Clara', 'Bonica'], 'temp_min': 15.0, 'temp_opt': 25.0, 'temp_max': 32.0, 'duree_germination': 10.0, 'duree_semis_repiquage': 40.0, 'duree_semis_recolte': 110.0, 'duree_repiquage_recolte': 90.0, 'espacement': 60.0, 'profondeur': 0.5, 'unite': 'pièce', 'notes': 'Semis précoce recommandé'}, {'nom': 'Mini aubergine', 'categorie': 'Mini', 'varietes': ['Hansel', 'Gretel', 'Little Prince', 'Fairy Tale'], 'temp_min': 15.0, 'temp_opt': 25.0, 'temp_max': 32.0, 'duree_germination': 10.0, 'duree_semis_repiquage': 38.0, 'duree_semis_recolte': 100.0, 'duree_repiquage_recolte': 80.0, 'espacement': 45.0, 'profondeur': 0.5, 'unite': 'pièce', 'notes': 'Très productif en serre'}, {'nom': 'Poivron', 'categorie': 'Fruit', 'varietes': ['Yolo Wonder', 'Doux des Landes', 'Lamuyo', 'California Wonder'], 'temp_min': 15.0, 'temp_opt': 24.0, 'temp_max': 30.0, 'duree_germination': 12.0, 'duree_semis_repiquage': 40.0, 'duree_semis_recolte': 100.0, 'duree_repiquage_recolte': 80.0, 'espacement': 50.0, 'profondeur': 0.5, 'unite': 'pièce', 'notes': ''}, {'nom': 'Mini poivron', 'categorie': 'Mini', 'varietes': ['Sweet Mini Mix', 'Palermo', 'Snack', 'Lunchbox'], 'temp_min': 15.0, 'temp_opt': 24.0, 'temp_max': 30.0, 'duree_germination': 12.0, 'duree_semis_repiquage': 38.0, 'duree_semis_recolte': 95.0, 'duree_repiquage_recolte': 75.0, 'espacement': 40.0, 'profondeur': 0.5, 'unite': 'barquette', 'notes': ''}, {'nom': 'Piment', 'categorie': 'Fruit', 'varietes': ['Espelette', 'Jalapeño Bio', 'Doux d\\', ','], 'temp_min': 16.0, 'temp_opt': 25.0, 'temp_max': 32.0, 'duree_germination': 14.0, 'duree_semis_repiquage': 42.0, 'duree_semis_recolte': 110.0, 'duree_repiquage_recolte': 90.0, 'espacement': 45.0, 'profondeur': 0.5, 'unite': 'pièce', 'notes': ''}, {'nom': 'Physalis', 'categorie': 'Fruit', 'varietes': ['Géant de Varsovie', 'Cossack Pineapple'], 'temp_min': 15.0, 'temp_opt': 22.0, 'temp_max': 28.0, 'duree_germination': 14.0, 'duree_semis_repiquage': 40.0, 'duree_semis_recolte': 120.0, 'duree_repiquage_recolte': 90.0, 'espacement': 60.0, 'profondeur': 0.3, 'unite': 'barquette', 'notes': 'Similaire à la tomate'}, {'nom': 'Haricot vert', 'categorie': 'Légumineuse', 'varietes': ['Contender', 'Triomphe de Farcy', 'Blauhilde', 'Maxibel'], 'temp_min': 12.0, 'temp_opt': 22.0, 'temp_max': 30.0, 'duree_germination': 8.0, 'duree_semis_repiquage': None, 'duree_semis_recolte': 65.0, 'duree_repiquage_recolte': None, 'espacement': 15.0, 'profondeur': 3.0, 'unite': 'kg', 'notes': 'Semis direct'}, {'nom': 'Petits pois', 'categorie': 'Légumineuse', 'varietes': ['Douce Provence', 'Merveille de Kelvedon', 'Lincoln'], 'temp_min': 5.0, 'temp_opt': 15.0, 'temp_max': 20.0, 'duree_germination': 10.0, 'duree_semis_repiquage': None, 'duree_semis_recolte': 75.0, 'duree_repiquage_recolte': None, 'espacement': 10.0, 'profondeur': 3.0, 'unite': 'kg', 'notes': 'Supporte le froid'}, {'nom': 'Fève', 'categorie': 'Légumineuse', 'varietes': ['Aquadulce', 'Witkiem Manita', 'Luz de Otono'], 'temp_min': 4.0, 'temp_opt': 15.0, 'temp_max': 20.0, 'duree_germination': 12.0, 'duree_semis_repiquage': None, 'duree_semis_recolte': 100.0, 'duree_repiquage_recolte': None, 'espacement': 20.0, 'profondeur': 5.0, 'unite': 'kg', 'notes': 'Semis direct automne ou printemps'}, {'nom': 'Soja Edamame', 'categorie': 'Légumineuse', 'varietes': ['Beer Friend', 'Midori Giant', 'Envy'], 'temp_min': 15.0, 'temp_opt': 24.0, 'temp_max': 32.0, 'duree_germination': 8.0, 'duree_semis_repiquage': None, 'duree_semis_recolte': 90.0, 'duree_repiquage_recolte': None, 'espacement': 15.0, 'profondeur': 3.0, 'unite': 'kg', 'notes': 'Récolter avant maturité complète'}, {'nom': 'Lentille', 'categorie': 'Légumineuse', 'varietes': ['Verte du Puy', 'Blonde', 'Beluga'], 'temp_min': 5.0, 'temp_opt': 18.0, 'temp_max': 25.0, 'duree_germination': 10.0, 'duree_semis_repiquage': None, 'duree_semis_recolte': 100.0, 'duree_repiquage_recolte': None, 'espacement': 10.0, 'profondeur': 3.0, 'unite': 'kg', 'notes': 'Semis direct printemps'}, {'nom': 'Pois chiche', 'categorie': 'Légumineuse', 'varietes': ['Castelluccio', 'Blanco Lechoso'], 'temp_min': 8.0, 'temp_opt': 20.0, 'temp_max': 30.0, 'duree_germination': 10.0, 'duree_semis_repiquage': None, 'duree_semis_recolte': 100.0, 'duree_repiquage_recolte': None, 'espacement': 20.0, 'profondeur': 4.0, 'unite': 'kg', 'notes': 'Semis direct'}, {'nom': 'Laitue', 'categorie': 'Feuille', 'varietes': ['Batavia', 'Blonde de Paris', 'Lollo Rossa', 'Merveille des 4 saisons', 'Reine de Mai'], 'temp_min': 5.0, 'temp_opt': 16.0, 'temp_max': 22.0, 'duree_germination': 6.0, 'duree_semis_repiquage': 25.0, 'duree_semis_recolte': 60.0, 'duree_repiquage_recolte': 45.0, 'espacement': 25.0, 'profondeur': 0.3, 'unite': 'pièce', 'notes': 'Sensible à la chaleur'}, {'nom': 'Épinard', 'categorie': 'Feuille', 'varietes': ['Géant d\\', ',', ','], 'temp_min': 2.0, 'temp_opt': 15.0, 'temp_max': 20.0, 'duree_germination': 10.0, 'duree_semis_repiquage': None, 'duree_semis_recolte': 50.0, 'duree_repiquage_recolte': None, 'espacement': 15.0, 'profondeur': 1.0, 'unite': 'kg', 'notes': ''}, {'nom': 'Blette', 'categorie': 'Feuille', 'varietes': ['Bright Lights', 'Verte à carde blanche', 'Yellow Sunrise'], 'temp_min': 10.0, 'temp_opt': 18.0, 'temp_max': 25.0, 'duree_germination': 8.0, 'duree_semis_repiquage': 28.0, 'duree_semis_recolte': 70.0, 'duree_repiquage_recolte': 55.0, 'espacement': 30.0, 'profondeur': 2.0, 'unite': 'botte', 'notes': ''}, {'nom': 'Chou frisé (Kale)', 'categorie': 'Feuille', 'varietes': ['Noir de Toscane', 'Red Russian', 'Dwarf Green Curled'], 'temp_min': 2.0, 'temp_opt': 15.0, 'temp_max': 22.0, 'duree_germination': 7.0, 'duree_semis_repiquage': 30.0, 'duree_semis_recolte': 90.0, 'duree_repiquage_recolte': 70.0, 'espacement': 50.0, 'profondeur': 1.0, 'unite': 'botte', 'notes': 'Résiste au gel'}, {'nom': 'Mesclun bio', 'categorie': 'Feuille', 'varietes': ['Mélange provençal', 'Mélange de saison', 'Mélange 4 saisons'], 'temp_min': 5.0, 'temp_opt': 14.0, 'temp_max': 20.0, 'duree_germination': 6.0, 'duree_semis_repiquage': None, 'duree_semis_recolte': 35.0, 'duree_repiquage_recolte': None, 'espacement': 1.0, 'profondeur': 0.5, 'unite': 'sachet', 'notes': 'Coupes successives'}, {'nom': 'Roquette', 'categorie': 'Feuille', 'varietes': ['Sauvage', 'Cultivée', 'Wasabi'], 'temp_min': 5.0, 'temp_opt': 15.0, 'temp_max': 22.0, 'duree_germination': 5.0, 'duree_semis_repiquage': None, 'duree_semis_recolte': 40.0, 'duree_repiquage_recolte': None, 'espacement': 10.0, 'profondeur': 0.5, 'unite': 'botte', 'notes': 'Monte vite à la chaleur'}, {'nom': 'Mâche', 'categorie': 'Feuille', 'varietes': ['Vit', 'Gala', 'Baron'], 'temp_min': 2.0, 'temp_opt': 12.0, 'temp_max': 18.0, 'duree_germination': 14.0, 'duree_semis_repiquage': None, 'duree_semis_recolte': 60.0, 'duree_repiquage_recolte': None, 'espacement': 10.0, 'profondeur': 0.5, 'unite': 'sachet', 'notes': 'Semis direct automne'}, {'nom': 'Chicorée', 'categorie': 'Feuille', 'varietes': ['Endive Witloof', 'Pain de Sucre', 'Trévise', 'Palla Rossa'], 'temp_min': 5.0, 'temp_opt': 15.0, 'temp_max': 22.0, 'duree_germination': 8.0, 'duree_semis_repiquage': None, 'duree_semis_recolte': 100.0, 'duree_repiquage_recolte': None, 'espacement': 30.0, 'profondeur': 0.5, 'unite': 'pièce', 'notes': ''}, {'nom': 'Cresson', 'categorie': 'Feuille', 'varietes': ['Alenois', 'De fontaine'], 'temp_min': 5.0, 'temp_opt': 14.0, 'temp_max': 20.0, 'duree_germination': 7.0, 'duree_semis_repiquage': None, 'duree_semis_recolte': 35.0, 'duree_repiquage_recolte': None, 'espacement': 5.0, 'profondeur': 0.3, 'unite': 'botte', 'notes': 'Humidité constante requise'}, {'nom': 'Pourpier', 'categorie': 'Feuille', 'varietes': ['Doré', 'Vert'], 'temp_min': 15.0, 'temp_opt': 22.0, 'temp_max': 30.0, 'duree_germination': 6.0, 'duree_semis_repiquage': None, 'duree_semis_recolte': 40.0, 'duree_repiquage_recolte': None, 'espacement': 20.0, 'profondeur': 0.5, 'unite': 'botte', 'notes': 'Très rustique'}, {'nom': 'Tétragone', 'categorie': 'Feuille', 'varietes': ['Tétragone cornue'], 'temp_min': 15.0, 'temp_opt': 22.0, 'temp_max': 30.0, 'duree_germination': 14.0, 'duree_semis_repiquage': None, 'duree_semis_recolte': 60.0, 'duree_repiquage_recolte': None, 'espacement': 50.0, 'profondeur': 1.0, 'unite': 'kg', 'notes': 'Alternative épinard été'}, {'nom': 'Arroche', 'categorie': 'Feuille', 'varietes': ['Rouge', 'Dorée', 'Verte'], 'temp_min': 8.0, 'temp_opt': 18.0, 'temp_max': 28.0, 'duree_germination': 8.0, 'duree_semis_repiquage': None, 'duree_semis_recolte': 60.0, 'duree_repiquage_recolte': None, 'espacement': 40.0, 'profondeur': 1.0, 'unite': 'botte', 'notes': 'Alternative épinard été'}, {'nom': 'Oseille', 'categorie': 'Feuille', 'varietes': ['Ronde de Belleville', 'De Belleville'], 'temp_min': 5.0, 'temp_opt': 15.0, 'temp_max': 22.0, 'duree_germination': 10.0, 'duree_semis_repiquage': 25.0, 'duree_semis_recolte': 60.0, 'duree_repiquage_recolte': 45.0, 'espacement': 30.0, 'profondeur': 0.5, 'unite': 'botte', 'notes': 'Vivace, semis ou division'}, {'nom': 'Basilic', 'categorie': 'Herbe', 'varietes': ['Grand vert', 'Pourpre', 'Citron', 'Thaï', 'Genovese'], 'temp_min': 15.0, 'temp_opt': 22.0, 'temp_max': 30.0, 'duree_germination': 7.0, 'duree_semis_repiquage': 28.0, 'duree_semis_recolte': 50.0, 'duree_repiquage_recolte': 40.0, 'espacement': 25.0, 'profondeur': 0.3, 'unite': 'pot', 'notes': 'Craint le froid et l\\'}, {'nom': 'Persil', 'categorie': 'Herbe', 'varietes': ['Plat géant d\\', ',', ','], 'temp_min': 5.0, 'temp_opt': 16.0, 'temp_max': 22.0, 'duree_germination': 18.0, 'duree_semis_repiquage': 35.0, 'duree_semis_recolte': 75.0, 'duree_repiquage_recolte': 60.0, 'espacement': 20.0, 'profondeur': 0.5, 'unite': 'botte', 'notes': 'Germination lente'}, {'nom': 'Coriandre', 'categorie': 'Herbe', 'varietes': ['Santo', 'Confetti', 'Slow Bolt'], 'temp_min': 10.0, 'temp_opt': 18.0, 'temp_max': 25.0, 'duree_germination': 12.0, 'duree_semis_repiquage': None, 'duree_semis_recolte': 50.0, 'duree_repiquage_recolte': None, 'espacement': 15.0, 'profondeur': 1.0, 'unite': 'botte', 'notes': ''}, {'nom': 'Ciboulette', 'categorie': 'Herbe', 'varietes': ['Commune', 'Ail'], 'temp_min': 5.0, 'temp_opt': 16.0, 'temp_max': 24.0, 'duree_germination': 14.0, 'duree_semis_repiquage': 30.0, 'duree_semis_recolte': 70.0, 'duree_repiquage_recolte': 50.0, 'espacement': 20.0, 'profondeur': 0.5, 'unite': 'pot', 'notes': 'Vivace, division tous les 3 ans'}, {'nom': 'Thym', 'categorie': 'Herbe', 'varietes': ['Commun', 'Citron', 'Serpolet'], 'temp_min': 5.0, 'temp_opt': 18.0, 'temp_max': 28.0, 'duree_germination': 14.0, 'duree_semis_repiquage': 35.0, 'duree_semis_recolte': 90.0, 'duree_repiquage_recolte': 70.0, 'espacement': 30.0, 'profondeur': 0.3, 'unite': 'pot', 'notes': 'Vivace méditerranéen'}, {'nom': 'Stévia', 'categorie': 'Herbe', 'varietes': ['Rebaudioside'], 'temp_min': 15.0, 'temp_opt': 22.0, 'temp_max': 30.0, 'duree_germination': 14.0, 'duree_semis_repiquage': 30.0, 'duree_semis_recolte': 90.0, 'duree_repiquage_recolte': 70.0, 'espacement': 40.0, 'profondeur': 0.3, 'unite': 'pot', 'notes': 'Sensible au gel'}, {'nom': 'Carotte', 'categorie': 'Racine', 'varietes': ['Nantaise', 'Touchon', 'Purple Haze', 'Rothild', 'Chantenay'], 'temp_min': 7.0, 'temp_opt': 18.0, 'temp_max': 25.0, 'duree_germination': 14.0, 'duree_semis_repiquage': None, 'duree_semis_recolte': 90.0, 'duree_repiquage_recolte': None, 'espacement': 8.0, 'profondeur': 1.0, 'unite': 'botte', 'notes': 'Semis direct, éclaircir à 8cm'}, {'nom': 'Mini carotte', 'categorie': 'Mini', 'varietes': ['Parmex', 'Thumbelina', 'Atlas'], 'temp_min': 7.0, 'temp_opt': 18.0, 'temp_max': 25.0, 'duree_germination': 12.0, 'duree_semis_repiquage': None, 'duree_semis_recolte': 65.0, 'duree_repiquage_recolte': None, 'espacement': 5.0, 'profondeur': 1.0, 'unite': 'botte', 'notes': ''}, {'nom': 'Radis', 'categorie': 'Racine', 'varietes': ['Rond rouge', 'French Breakfast', 'Rond de Chine', 'Watermelon'], 'temp_min': 5.0, 'temp_opt': 15.0, 'temp_max': 20.0, 'duree_germination': 4.0, 'duree_semis_repiquage': None, 'duree_semis_recolte': 28.0, 'duree_repiquage_recolte': None, 'espacement': 5.0, 'profondeur': 1.0, 'unite': 'botte', 'notes': 'Cycle très court'}, {'nom': 'Betterave', 'categorie': 'Racine', 'varietes': ['Rouge crapaudine', 'Chioggia', 'Jaune de Détroit', 'Bull\\'], 'temp_min': 8.0, 'temp_opt': 18.0, 'temp_max': 25.0, 'duree_germination': 12.0, 'duree_semis_repiquage': None, 'duree_semis_recolte': 90.0, 'duree_repiquage_recolte': None, 'espacement': 15.0, 'profondeur': 2.0, 'unite': 'botte', 'notes': ''}, {'nom': 'Navet', 'categorie': 'Racine', 'varietes': ['Blanc globe', 'De Milan', 'Boule d\\', ','], 'temp_min': 5.0, 'temp_opt': 15.0, 'temp_max': 22.0, 'duree_germination': 6.0, 'duree_semis_repiquage': None, 'duree_semis_recolte': 60.0, 'duree_repiquage_recolte': None, 'espacement': 15.0, 'profondeur': 1.0, 'unite': 'botte', 'notes': ''}, {'nom': 'Panais', 'categorie': 'Racine', 'varietes': ['Tender and True', 'Javelin', 'Hollow Crown'], 'temp_min': 5.0, 'temp_opt': 16.0, 'temp_max': 22.0, 'duree_germination': 18.0, 'duree_semis_repiquage': None, 'duree_semis_recolte': 120.0, 'duree_repiquage_recolte': None, 'espacement': 15.0, 'profondeur': 1.0, 'unite': 'botte', 'notes': 'Germination très lente, semis direct'}, {'nom': 'Fenouil', 'categorie': 'Racine', 'varietes': ['Fino', 'Zefa Fino', 'Romanesco'], 'temp_min': 8.0, 'temp_opt': 18.0, 'temp_max': 25.0, 'duree_germination': 10.0, 'duree_semis_repiquage': 30.0, 'duree_semis_recolte': 90.0, 'duree_repiquage_recolte': 70.0, 'espacement': 30.0, 'profondeur': 1.0, 'unite': 'pièce', 'notes': ''}, {'nom': 'Rutabaga', 'categorie': 'Racine', 'varietes': ['Wilhelmsburger', 'Best of All'], 'temp_min': 5.0, 'temp_opt': 15.0, 'temp_max': 22.0, 'duree_germination': 7.0, 'duree_semis_repiquage': None, 'duree_semis_recolte': 120.0, 'duree_repiquage_recolte': None, 'espacement': 25.0, 'profondeur': 1.0, 'unite': 'botte', 'notes': ''}, {'nom': 'Scorsonère', 'categorie': 'Racine', 'varietes': ['Géante noire de Russie', 'Maxima'], 'temp_min': 8.0, 'temp_opt': 18.0, 'temp_max': 25.0, 'duree_germination': 14.0, 'duree_semis_repiquage': None, 'duree_semis_recolte': 180.0, 'duree_repiquage_recolte': None, 'espacement': 15.0, 'profondeur': 2.0, 'unite': 'botte', 'notes': 'Semis direct, vivace'}, {'nom': 'Chou-fleur', 'categorie': 'Brassica', 'varietes': ['Boule de Neige', 'Romanesco Bio', 'Violet de Sicile'], 'temp_min': 5.0, 'temp_opt': 15.0, 'temp_max': 22.0, 'duree_germination': 7.0, 'duree_semis_repiquage': 35.0, 'duree_semis_recolte': 140.0, 'duree_repiquage_recolte': 110.0, 'espacement': 60.0, 'profondeur': 1.0, 'unite': 'pièce', 'notes': ''}, {'nom': 'Brocoli', 'categorie': 'Brassica', 'varietes': ['Calabrais', 'Green Magic', 'Romanesco', 'Marathon'], 'temp_min': 5.0, 'temp_opt': 16.0, 'temp_max': 22.0, 'duree_germination': 7.0, 'duree_semis_repiquage': 32.0, 'duree_semis_recolte': 120.0, 'duree_repiquage_recolte': 90.0, 'espacement': 50.0, 'profondeur': 1.0, 'unite': 'pièce', 'notes': ''}, {'nom': 'Chou de Bruxelles', 'categorie': 'Brassica', 'varietes': ['Grosse tête', 'Long Island', 'Jade Cross'], 'temp_min': 5.0, 'temp_opt': 15.0, 'temp_max': 20.0, 'duree_germination': 7.0, 'duree_semis_repiquage': 35.0, 'duree_semis_recolte': 180.0, 'duree_repiquage_recolte': 150.0, 'espacement': 60.0, 'profondeur': 1.0, 'unite': 'kg', 'notes': ''}, {'nom': 'Chou vert', 'categorie': 'Brassica', 'varietes': ['Quintal d\\', ',', ','], 'temp_min': 5.0, 'temp_opt': 15.0, 'temp_max': 22.0, 'duree_germination': 7.0, 'duree_semis_repiquage': 35.0, 'duree_semis_recolte': 200.0, 'duree_repiquage_recolte': 170.0, 'espacement': 60.0, 'profondeur': 1.0, 'unite': 'pièce', 'notes': 'Récolte tardive'}, {'nom': 'Chou rouge', 'categorie': 'Brassica', 'varietes': ['Rodeo', 'Rougette de Vaugirard'], 'temp_min': 5.0, 'temp_opt': 15.0, 'temp_max': 22.0, 'duree_germination': 7.0, 'duree_semis_repiquage': 35.0, 'duree_semis_recolte': 180.0, 'duree_repiquage_recolte': 150.0, 'espacement': 55.0, 'profondeur': 1.0, 'unite': 'pièce', 'notes': ''}, {'nom': 'Oignon', 'categorie': 'Allium', 'varietes': ['Rouge de Florence', 'Blanc de Paris', 'Sturon', 'Jaune paille des Vertus'], 'temp_min': 5.0, 'temp_opt': 16.0, 'temp_max': 24.0, 'duree_germination': 10.0, 'duree_semis_repiquage': 60.0, 'duree_semis_recolte': 120.0, 'duree_repiquage_recolte': None, 'espacement': 12.0, 'profondeur': 2.0, 'unite': 'kg', 'notes': ''}, {'nom': 'Échalote', 'categorie': 'Allium', 'varietes': ['Grise', 'Longue de Jersey', 'Demi-longue de Niort'], 'temp_min': 5.0, 'temp_opt': 16.0, 'temp_max': 22.0, 'duree_germination': None, 'duree_semis_repiquage': None, 'duree_semis_recolte': 130.0, 'duree_repiquage_recolte': None, 'espacement': 15.0, 'profondeur': 5.0, 'unite': 'kg', 'notes': 'Plantation de caïeux'}, {'nom': 'Ail', 'categorie': 'Allium', 'varietes': ['Rose de Lautrec', 'Blanc de Lomagne', 'Violet de Cadours'], 'temp_min': 5.0, 'temp_opt': 15.0, 'temp_max': 25.0, 'duree_germination': None, 'duree_semis_repiquage': None, 'duree_semis_recolte': 240.0, 'duree_repiquage_recolte': None, 'espacement': 15.0, 'profondeur': 5.0, 'unite': 'tête', 'notes': 'Plantation automne ou printemps'}, {'nom': 'Poireau', 'categorie': 'Allium', 'varietes': ['Monstrueux de Carentan', 'Bleu de Solaize', 'Elefant'], 'temp_min': 5.0, 'temp_opt': 15.0, 'temp_max': 22.0, 'duree_germination': 12.0, 'duree_semis_repiquage': 60.0, 'duree_semis_recolte': 160.0, 'duree_repiquage_recolte': 130.0, 'espacement': 15.0, 'profondeur': 1.0, 'unite': 'botte', 'notes': ''}, {'nom': 'Céleri rave', 'categorie': 'Racine', 'varietes': ['Blanc Pascal', 'Monarch', 'Diamant'], 'temp_min': 5.0, 'temp_opt': 16.0, 'temp_max': 22.0, 'duree_germination': 18.0, 'duree_semis_repiquage': 45.0, 'duree_semis_recolte': 150.0, 'duree_repiquage_recolte': 120.0, 'espacement': 35.0, 'profondeur': 0.3, 'unite': 'pièce', 'notes': 'Semis précoce en février'}, {'nom': 'Céleri branche', 'categorie': 'Feuille', 'varietes': ['Tall Utah', 'Golden Self-Blanching', 'Victoria'], 'temp_min': 5.0, 'temp_opt': 16.0, 'temp_max': 22.0, 'duree_germination': 18.0, 'duree_semis_repiquage': 45.0, 'duree_semis_recolte': 150.0, 'duree_repiquage_recolte': 120.0, 'espacement': 40.0, 'profondeur': 0.3, 'unite': 'pièce', 'notes': ''}, {'nom': 'Artichaut', 'categorie': 'Fruit', 'varietes': ['Vert de Laon', 'Violet de Provence', 'Camus de Bretagne'], 'temp_min': 8.0, 'temp_opt': 18.0, 'temp_max': 25.0, 'duree_germination': 14.0, 'duree_semis_repiquage': 60.0, 'duree_semis_recolte': 365.0, 'duree_repiquage_recolte': 300.0, 'espacement': 100.0, 'profondeur': 1.0, 'unite': 'pièce', 'notes': 'Vivace, production 2ème année'}, {'nom': 'Maïs doux', 'categorie': 'Fruit', 'varietes': ['Golden Bantam', 'How Sweet It Is', 'Delice F1'], 'temp_min': 12.0, 'temp_opt': 24.0, 'temp_max': 32.0, 'duree_germination': 8.0, 'duree_semis_repiquage': None, 'duree_semis_recolte': 90.0, 'duree_repiquage_recolte': None, 'espacement': 40.0, 'profondeur': 3.0, 'unite': 'épi', 'notes': 'Semis direct, pollinisation croisée'}, {'nom': 'Gombo', 'categorie': 'Fruit', 'varietes': ['Clemson Spineless', 'Red Burgundy'], 'temp_min': 18.0, 'temp_opt': 28.0, 'temp_max': 35.0, 'duree_germination': 10.0, 'duree_semis_repiquage': 25.0, 'duree_semis_recolte': 90.0, 'duree_repiquage_recolte': 70.0, 'espacement': 60.0, 'profondeur': 2.0, 'unite': 'kg', 'notes': 'Exige chaleur, idéal serre'}, {'nom': 'Amarante', 'categorie': 'Feuille', 'varietes': ['Rouge', 'Verte', 'Tricolore'], 'temp_min': 15.0, 'temp_opt': 22.0, 'temp_max': 30.0, 'duree_germination': 7.0, 'duree_semis_repiquage': None, 'duree_semis_recolte': 70.0, 'duree_repiquage_recolte': None, 'espacement': 30.0, 'profondeur': 0.5, 'unite': 'botte', 'notes': 'Feuilles et graines comestibles'}, {'nom': 'Rhubarbe', 'categorie': 'Fruit', 'varietes': ['Victoria', 'Canada Red', 'Timperley Early'], 'temp_min': 2.0, 'temp_opt': 15.0, 'temp_max': 22.0, 'duree_germination': 20.0, 'duree_semis_repiquage': 60.0, 'duree_semis_recolte': 730.0, 'duree_repiquage_recolte': 365.0, 'espacement': 100.0, 'profondeur': 2.0, 'unite': 'kg', 'notes': 'Vivace, ne pas récolter la 1ère année'}, {'nom': 'Kiwano', 'categorie': 'Fruit', 'varietes': ['African Horned Melon'], 'temp_min': 18.0, 'temp_opt': 28.0, 'temp_max': 35.0, 'duree_germination': 10.0, 'duree_semis_repiquage': 25.0, 'duree_semis_recolte': 120.0, 'duree_repiquage_recolte': 100.0, 'espacement': 100.0, 'profondeur': 1.0, 'unite': 'pièce', 'notes': 'Exotique, besoin chaleur'}]

def seed_fiches():
    """Insère les fiches légumes si la table est vide"""
    db = get_db()
    count = db.execute('SELECT COUNT(*) as n FROM fiches').fetchone()['n']
    if count > 0:
        db.close()
        return
    for l in LEGUMES:
        db.execute('''INSERT OR IGNORE INTO fiches
            (nom, categorie, varietes, temp_min, temp_opt, temp_max,
             duree_germination, duree_semis_repiquage, duree_semis_recolte,
             duree_repiquage_recolte, espacement, profondeur, unite, notes)
            VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?)''',
            (l['nom'], l['categorie'], json.dumps(l['varietes']),
             l['temp_min'], l['temp_opt'], l['temp_max'],
             l['duree_germination'], l['duree_semis_repiquage'],
             l['duree_semis_recolte'], l['duree_repiquage_recolte'],
             l['espacement'], l['profondeur'], l['unite'], l['notes']))
    db.commit()
    db.close()
    print(f"Fiches légumes initialisées : {len(LEGUMES)} légumes")
